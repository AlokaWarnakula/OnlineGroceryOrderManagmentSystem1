Index: src/main/webapp/userLogin/orderCancel.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\n<%@ page import=\"model.FileUtil\" %>\n<%@ page import=\"model.FileUtil.Order\" %>\n<%@ page import=\"model.GroceryItem\" %>\n<%@ page import=\"java.util.List\" %>\n<%@ page import=\"java.util.ArrayList\" %>\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Cancel Order - Grocery</title>\n  <base href=\"${pageContext.request.contextPath}/\">\n  <link rel=\"stylesheet\" href=\"${pageContext.request.contextPath}/css/cart.css\">\n  <link rel=\"stylesheet\" href=\"${pageContext.request.contextPath}/css/orderCancel.css\">\n  <link href=\"https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css\" rel=\"stylesheet\" />\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css\" integrity=\"sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\" />\n</head>\n<body>\n<header>\n  <a href=\"${pageContext.request.contextPath}/UserProfileServlet\" class=\"back-link\"><i class=\"fas fa-arrow-left\"></i> Back</a>\n  <a href=\"${pageContext.request.contextPath}/index.jsp\" class=\"logo\"><i class=\"fa-solid fa-basket-shopping\"></i> Grocery</a>\n</header>\n\n<section class=\"cancel-container\">\n  <div class=\"order-section\">\n    <h2 class=\"section-title\">Ordered Products</h2>\n    <div class=\"order-items\" id=\"order-items\">\n      <%\n        // File paths\n        String ordersFile = \"/Users/alokawarnakula/TestOOPProjectFolder/OnlineGroceryOrderSystem/src/main/webapp/data/orders.txt\";\n        String itemsFile = \"/Users/alokawarnakula/TestOOPProjectFolder/OnlineGroceryOrderSystem/src/main/webapp/data/items.txt\";\n\n        // Get the orderNumber from the request\n        String orderNumber = request.getParameter(\"orderNumber\");\n        if (orderNumber == null || orderNumber.trim().isEmpty()) {\n      %>\n      <p>Error: Invalid order number.</p>\n      <%\n      } else {\n        // Read the order from orders.txt\n        List<Order> orders = FileUtil.readAllOrders(ordersFile);\n        Order order = null;\n        for (Order o : orders) {\n          if (o.getOrderNumber().equals(orderNumber)) {\n            order = o;\n            break;\n          }\n        }\n\n        if (order == null) {\n      %>\n      <p>Error: Order not found.</p>\n      <%\n      } else {\n        // Read items from items.txt to get product details\n        List<GroceryItem> items = FileUtil.readItems(itemsFile);\n        if (items == null) {\n          items = new ArrayList<>();\n        }\n\n        // Calculate total quantity and total price\n        int totalQuantity = 0;\n        double totalPrice = order.getTotalPrice();\n        List<String[]> products = order.getProducts();\n\n        // Display each product in the order\n        for (String[] product : products) {\n          String productID = product[0];\n          int quantity = Integer.parseInt(product[1]);\n          totalQuantity += quantity;\n\n          // Find the product in items.txt to get its details\n          GroceryItem item = null;\n          for (GroceryItem groceryItem : items) {\n            if (String.valueOf(groceryItem.getProductID()).equals(productID)) {\n              item = groceryItem;\n              break;\n            }\n          }\n\n          if (item != null) {\n            double itemTotalPrice = item.getProductPrice() * quantity;\n      %>\n      <div class=\"order-item\">\n        <img src=\"<%= item.getProductImageLink() %>\" alt=\"<%= item.getProductName() %>\" class=\"order-item-img\">\n        <div class=\"order-item-details\">\n          <span class=\"order-product-title\"><%= item.getProductName() %></span>\n          <span class=\"order-price\">RS. <%= String.format(\"%.2f\", item.getProductPrice()) %> / Product X <%= quantity %></span>\n          <span class=\"order-total\">RS. <%= String.format(\"%.2f\", itemTotalPrice) %></span>\n        </div>\n      </div>\n      <%\n          }\n        }\n      %>\n    </div>\n  </div>\n\n  <div class=\"cancel-form\">\n    <h2 class=\"section-title\">CANCEL ORDER</h2>\n    <form action=\"${pageContext.request.contextPath}/UserProfileServlet\" method=\"get\" id=\"cancel-form\">\n      <input type=\"hidden\" name=\"action\" value=\"cancelOrder\">\n      <input type=\"hidden\" name=\"orderNumber\" value=\"<%= orderNumber %>\">\n      <div class=\"total-info\" id=\"total-info\">\n        <span>Total Quantity: <span id=\"total-quantity\"><%= totalQuantity %></span></span>\n        <span>Total Price: RS. <span id=\"total-price\"><%= String.format(\"%.2f\", totalPrice) %></span></span>\n      </div>\n      <button type=\"submit\" class=\"cancel-btn\">CANCEL</button>\n    </form>\n  </div>\n  <%\n      }\n    }\n  %>\n</section>\n\n<script src=\"${pageContext.request.contextPath}/js/orderCancel.js\"></script>\n</body>\n</html>
===================================================================
diff --git a/src/main/webapp/userLogin/orderCancel.jsp b/src/main/webapp/userLogin/orderCancel.jsp
--- a/src/main/webapp/userLogin/orderCancel.jsp	(revision b88c5a1eab17284a1e35249ec567fdd6d7148f8e)
+++ b/src/main/webapp/userLogin/orderCancel.jsp	(date 1742564607582)
@@ -117,4 +117,4 @@
 
 <script src="${pageContext.request.contextPath}/js/orderCancel.js"></script>
 </body>
-</html>
\ No newline at end of file
+</html> <!-- UserProfile Branch Initiate -->
\ No newline at end of file
